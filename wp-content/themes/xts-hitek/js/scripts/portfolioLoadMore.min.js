!function(d){XTSThemeModule.$document.on("xtsPortfolioPjaxComplete",function(){XTSThemeModule.portfolioLoadMore()}),XTSThemeModule.portfolioLoadMore=function(){var l=".xts-load-more.xts-type-portfolio.xts-action-infinite",i=!1;XTSThemeModule.clickOnScrollButton(l,!1),d(".xts-load-more.xts-type-portfolio").on("click",function(o){var e,a,s,t,n,r;o.preventDefault(),i||(i=!0,e=d(this),a=e.parent().parent().find(".xts-portfolio-loop"),s=a.data("source"),t=xts_settings.ajaxurl,n=a.data("paged"),r=a.data("atts"),o="POST",e.addClass("xts-loading"),r={paged:n,atts:r,action:"xts_get_portfolio_"+s},"main_loop"===s?(t=d(this).attr("href"),o="GET",r={loop:a.find(".xts-col").last().data("loop")}):r.atts.loop=a.find(".xts-col").last().data("loop"),d.ajax({url:t,data:r,dataType:"json",method:o,success:function(o){var t;o.items&&(a.hasClass("xts-masonry-layout")?(t=d(o.items),a.append(t).isotope("appended",t),a.imagesLoaded().progress(function(){a.isotope("layout")})):a.append(o.items),XTSThemeModule.$document.trigger("xtsPortfolioLoadMoreSuccess"),a.imagesLoaded().progress(function(){XTSThemeModule.clickOnScrollButton(l,!0)}),a.data("paged",n+1),window.history.pushState("","",o.currentPage),"main_loop"===s&&e.attr("href",o.nextPage)),"no-more-posts"===o.status&&e.remove()},error:function(){console.log("ajax error")},complete:function(){e.removeClass("xts-loading"),i=!1}}))})},d(document).ready(function(){XTSThemeModule.portfolioLoadMore()})}(jQuery);