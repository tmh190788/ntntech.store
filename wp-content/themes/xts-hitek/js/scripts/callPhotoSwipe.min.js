!function(n){XTSThemeModule.callPhotoSwipe=function(s){var e={index:s.index,tapToToggleControls:!1,isClickableElement:function(e){return n(e).hasClass("xts-pswp-gallery")||n(e).parent().hasClass("xts-pswp-gallery")||"A"===e.tagName},shareButtons:[{id:"facebook",label:xts_settings.photoswipe_facebook,url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:xts_settings.photoswipe_twitter,url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:xts_settings.photoswipe_pinterest,url:"https://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:xts_settings.photoswipe_download_image,url:"{{raw_image_url}}",download:!0}],getThumbBoundsFn:function(e){if(!s.galleryItems.hasClass("xts-carousel")){var t=s.galleryItems.find(s.parents).eq(e);s.global&&(t=s.galleryItems.find("a[data-index="+e+"]").parents(s.parents));e=window.pageYOffset||document.documentElement.scrollTop,t=t[0].getElementsByTagName("img")[0].getBoundingClientRect();return{x:t.left,y:t.top+e,w:t.width}}}};XTSThemeModule.$body.find(".pswp").remove(),XTSThemeModule.$body.append(xts_settings.photoswipe_template);var t=document.querySelectorAll(".pswp")[0],a=n(".xts-pswp-gallery"),i=new PhotoSwipe(t,PhotoSwipeUI_Default,s.items,e);if(i.init(),a.empty(),s.galleryItems.hasClass("xts-lightbox-gallery")&&!(s.items.length<=1)){for(var l=0;l<s.items.length;l++)a.append('<img src="'+s.items[l].src+'" data-index="'+(l+1)+'" alt="image">');a.find('img[data-index="'+(i.getCurrentIndex()+1)+'"]').addClass("xts-active"),i.listen("beforeChange",function(){var e=i.getCurrentIndex()+1,e=a.find('img[data-index="'+e+'"]');e.siblings().removeClass("xts-active"),e.addClass("xts-active")}),a.find("img").on("click",function(){var e=n(this).data("index");i.goTo(e-1)})}}}(jQuery);