!function(s){XTSThemeModule.$document.on("xtsPjaxComplete",function(){XTSThemeModule.productsCompare()}),XTSThemeModule.productsCompare=function(){if("undefined"!=typeof Cookies){var e="xts_compare_list";xts_settings.is_multisite&&(e+="_"+xts_settings.current_blog_id);var t=XTSThemeModule.$body,o=s(".xts-header-el.xts-header-compare, .xts-navbar-compare"),e=Cookies.get(e);if(0<o.length&&void 0!==e)try{var a=JSON.parse(e);o.find(".xts-compare-count, .xts-navbar-count").text(a.length)}catch(e){console.log("cant parse cookies json")}t.on("click",".xts-compare-btn a",function(e){var t=s(this),o=t.data("id"),a=t.data("added-text");if(t.hasClass("xts-added"))return!0;e.preventDefault(),t.addClass("xts-loading"),s.ajax({url:xts_settings.ajaxurl,data:{action:"xts_add_to_compare",id:o},dataType:"json",method:"GET",success:function(e){XTSThemeModule.$document.trigger("xtsAddedToCompare"),e.table?n(e):console.log("something wrong loading compare data ",e)},error:function(){console.log("We cant add to compare. Something wrong with AJAX response. Probably some PHP conflict.")},complete:function(){t.removeClass("xts-loading").addClass("xts-added"),(0<t.find("span").length?t.find("span"):t).text(a)}})}),t.on("click",".xts-compare-remove a",function(e){e.preventDefault();var t=s(this),e=t.data("id");t.addClass("xts-loading"),s.ajax({url:xts_settings.ajaxurl,data:{action:"xts_remove_from_compare",id:e},dataType:"json",method:"GET",success:function(e){e.table?n(e):console.log("something wrong loading compare data ",e)},error:function(){console.log("We cant remove product compare. Something wrong with AJAX response. Probably some PHP conflict.")},complete:function(){t.addClass("xts-loading")}})})}function n(e){0<o.length&&o.find(".xts-compare-count, .xts-navbar-count").text(e.count);var t=s(".xts-compare-table");0<t.length&&t.replaceWith(e.table)}},s(document).ready(function(){XTSThemeModule.productsCompare()})}(jQuery);