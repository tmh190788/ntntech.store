!function(h){function t(t,n,a){var r=this;return this.on("click.pjax",t,function(t){var e=h.extend({},l(n,a));e.container||(e.container=h(this).attr("data-pjax")||r),o(t,e)})}function o(t,e,n){n=l(e,n);var a=t.currentTarget;if("A"!==a.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";1<t.which||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||location.protocol===a.protocol&&location.hostname===a.hostname&&(-1<a.href.indexOf("#")&&u(a)==u(location)||t.isDefaultPrevented()||(e={url:a.href,container:h(a).attr("data-pjax"),target:a},e=h.extend({},e,n),n=h.Event("pjax:click"),h(a).trigger(n,[e]),n.isDefaultPrevented()||(m(e),t.preventDefault(),h(a).trigger("pjax:clicked",[e]))))}function e(t,e,n){n=l(e,n);var a=t.currentTarget,e=h(a);if("FORM"!==a.tagName.toUpperCase())throw"$.pjax.submit requires a form element";e={type:(e.attr("method")||"GET").toUpperCase(),url:e.attr("action"),container:e.attr("data-pjax"),target:a};if("GET"!==e.type&&void 0!==window.FormData)e.data=new FormData(a),e.processData=!1,e.contentType=!1;else{if(h(a).find(":file").length)return;e.data=h(a).serializeArray()}m(h.extend({},e,n)),t.preventDefault()}function m(u){u=h.extend(!0,{},h.ajaxSettings,m.defaults,u),h.isFunction(u.url)&&(u.url=u.url());var n,a=u.target,l=w(u.url).hash,t=b(u.container),p=u.context=t[0],d=t[1];function f(t,e,n){(n=n||{}).relatedTarget=a;n=h.Event(t,n);return p.trigger(n,e),!n.isDefaultPrevented()}u.data||(u.data={}),h.isArray(u.data)?u.data.push({name:"_pjax",value:d}):u.data._pjax=d,u.beforeSend=function(t,e){if("GET"!==e.type&&(e.timeout=0),t.setRequestHeader("X-PJAX","true"),t.setRequestHeader("X-PJAX-Container",d),!f("pjax:beforeSend",[t,e]))return!1;0<e.timeout&&(n=setTimeout(function(){f("pjax:timeout",[t,u])&&t.abort("timeout")},e.timeout),e.timeout=0);e=w(e.url);l&&(e.hash=l),u.requestUrl=y(e)},u.complete=function(t,e){n&&clearTimeout(n),f("pjax:complete",[t,e,u]),f("pjax:end",[t,u])},u.error=function(t,e,n){var a=T("",t,u),n=f("pjax:error",[t,e,n,u]);"GET"==u.type&&"abort"!==e&&n&&x(a.url)},u.success=function(t,e,n){var a=m.state,r="function"==typeof h.pjax.defaults.version?h.pjax.defaults.version():h.pjax.defaults.version,o=n.getResponseHeader("X-PJAX-Version"),i=T(t,n,u),s=w(i.url);if(l&&(s.hash=l,i.url=s.href),r&&o&&r!==o)x(i.url);else if(i.contents){if(m.state={id:u.id||g(),url:i.url,title:i.title,container:d,fragment:u.fragment,timeout:u.timeout},(u.push||u.replace)&&window.history.replaceState(m.state,i.title,i.url),h.contains(u.container,document.activeElement))try{document.activeElement.blur()}catch(t){}i.title&&(document.title=i.title),f("pjax:beforeReplace",[i.contents,u],{state:m.state,previousState:a}),p.html(i.contents);var c,o=p.find("input[autofocus], textarea[autofocus]").last()[0];o&&document.activeElement!==o&&o.focus(),(a=i.scripts)&&(c=h("script[src]"),a.each(function(){var t,e,n=this.src;c.filter(function(){return this.src===n}).length||(t=document.createElement("script"),(e=h(this).attr("type"))&&(t.type=e),t.src=h(this).attr("src"),document.head.appendChild(t))}));o=u.scrollTo;l&&(a=decodeURIComponent(l.slice(1)),(a=document.getElementById(a)||document.getElementsByName(a)[0])&&(o=h(a).offset().top)),"number"==typeof o&&h(window).scrollTop(o),f("pjax:success",[t,e,n,u])}else x(i.url)},m.state||(m.state={id:g(),url:window.location.href,title:document.title,container:d,fragment:u.fragment,timeout:u.timeout},window.history.replaceState(m.state,document.title)),v(m.xhr),m.options=u;var e,r=m.xhr=h.ajax(u);return 0<r.readyState&&(u.push&&!u.replace&&(e=m.state.id,t=j(p,d),E[e]=t,P.push(e),A(S,0),A(P,m.defaults.maxCacheLength),window.history.pushState(null,"",u.requestUrl)),f("pjax:start",[r,u]),f("pjax:send",[r,u])),m.xhr}function n(t,e){var n={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return m(h.extend(n,l(t,e)))}function x(t){window.history.replaceState(null,"",m.state.url),window.location.replace(t)}var i=!0,s=window.location.href,a=window.history.state;function r(t){i||v(m.xhr);var e=m.state,n=t.state;if(n&&n.container){if(i&&s==n.url)return;if(e){if(e.id===n.id)return;a=e.id<n.id?"forward":"back"}var a,r=E[n.id]||[],o=r[0]||n.container,t=h(o),r=r[1];t.length?(e&&function(t,e,n){var a;E[e]=n,t="forward"===t?(a=P,S):(a=S,P);a.push(e),(e=t.pop())&&delete E[e];A(a,m.defaults.maxCacheLength)}(a,e.id,j(t,o)),a=h.Event("pjax:popstate",{state:n,direction:a}),t.trigger(a),a={id:n.id,url:n.url,container:t,push:!1,fragment:n.fragment,timeout:n.timeout,scrollTo:!1},r?(t.trigger("pjax:start",[null,a]),(m.state=n).title&&(document.title=n.title),e=h.Event("pjax:beforeReplace",{state:n,previousState:e}),t.trigger(e,[r,a]),t.html(r),t.trigger("pjax:end",[null,a])):m(a),t[0].offsetHeight):x(location.href)}i=!1}function c(t){var e=h.isFunction(t.url)?t.url():t.url,n=t.type?t.type.toUpperCase():"GET",a=h("<form>",{method:"GET"===n?"GET":"POST",action:e,style:"display:none"});"GET"!==n&&"POST"!==n&&a.append(h("<input>",{type:"hidden",name:"_method",value:n.toLowerCase()}));var r,o=t.data;if("string"==typeof o)h.each(o.split("&"),function(t,e){e=e.split("=");a.append(h("<input>",{type:"hidden",name:e[0],value:e[1]}))});else if(h.isArray(o))h.each(o,function(t,e){a.append(h("<input>",{type:"hidden",name:e.name,value:e.value}))});else if("object"==typeof o)for(r in o)a.append(h("<input>",{type:"hidden",name:r,value:o[r]}));h(document.body).append(a),a.submit()}function v(t){t&&t.readyState<4&&(t.onreadystatechange=h.noop,t.abort())}function g(){return(new Date).getTime()}function j(t,e){t=t.clone();return t.find("script").each(function(){this.src||jQuery._data(this,"globalEval",!1)}),[e,t.contents()]}function y(t){return t.search=t.search.replace(/([?&])(_pjax|_)=[^&]*/g,""),t.href.replace(/\?($|#)/,"$1")}function w(t){var e=document.createElement("a");return e.href=t,e}function u(t){return t.href.replace(/#.*/,"")}function l(t,e){return t&&e?e.container=t:e=h.isPlainObject(t)?t:{container:t},e.container&&(e.container=b(e.container)),e}function b(t){var e,n;if(h.isArray(t)?(n=t[0],e=t[1]):n=h(e=t),n.length)return[n,e];throw"no pjax container for "+e}function p(t,e){return t.filter(e).add(t.find(e))}function d(t){return h.parseHTML(t,document,!0)}function T(t,e,n){var a,r,o={},i=/<html/i.test(t),e=e.getResponseHeader("X-PJAX-URL");return o.url=e?y(w(e)):n.requestUrl,i?(r=h(d(t.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0])),a=h(d(t.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]))):r=a=h(d(t)),0===a.length||(o.title=p(r,"title").last().text(),n.fragment?(r="body"===n.fragment?a:p(a,n.fragment).first()).length&&(o.contents="body"===n.fragment?r:r.contents(),o.title||(o.title=r.attr("title")||r.data("title"))):i||(o.contents=a),o.contents&&(o.contents=o.contents.not(function(){return h(this).is("title")}),o.contents.find("title").remove(),o.scripts=p(o.contents,"script[src]").remove(),o.contents=o.contents.not(o.scripts)),o.title&&(o.title=h.trim(o.title))),o}a&&a.container&&(m.state=a),"state"in window.history&&(i=!1);var E={},S=[],P=[];function A(t,e){for(;t.length>e;)delete E[t.shift()]}function f(){return h("meta").filter(function(){var t=h(this).attr("http-equiv");return t&&"X-PJAX-VERSION"===t.toUpperCase()}).attr("content")}function C(){h.fn.pjax=t,h.pjax=m,h.pjax.enable=h.noop,h.pjax.disable=D,h.pjax.click=o,h.pjax.submit=e,h.pjax.reload=n,h.pjax.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:f},h(window).on("popstate.pjax",r)}function D(){h.fn.pjax=function(){return this},h.pjax=c,h.pjax.enable=C,h.pjax.disable=h.noop,h.pjax.click=h.noop,h.pjax.submit=h.noop,h.pjax.reload=function(){window.location.reload()},h(window).off("popstate.pjax",r)}h.event.props&&h.inArray("state",h.event.props)<0?h.event.props.push("state"):"state"in h.Event.prototype||h.event.addProp("state"),h.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/),(h.support.pjax?C:D)()}(jQuery);